.home-toolbar.disply_b

  - if listing_shape_menu_enabled || @category_menu_enabled
    .home-toolbar-show-filters-button-container
      .home-toolbar-show-filters-button#home-toolbar-show-filters
        = t("homepage.index.filter")

  .home-toolbar-button-group{:class => listing_shape_menu_enabled || @category_menu_enabled ? "filters-enabled" : ""}
    - ["grid", "list", "map"].each do |view_type|
      - selected_class = @view_type == view_type ? "selected" : ""
      = link_to search_path(search_params.merge(view: view_type)), :class => "home-toolbar-button-group-button #{selected_class}", :title => t("homepage.filters.#{view_type}_button") do
        = icon_tag(view_type, ["icon-fix", "home-button-group-icon"])
        %span.home-toolbar-button-text
          = t("homepage.filters.#{view_type}_button")
  
  - if listing_shape_menu_enabled || @category_menu_enabled
    .home-toolbar-filters.home-toolbar-filters-mobile-hidden#home-toolbar-filters
      - if listing_shape_menu_enabled
        .toggle-container.home-toolbar-toggle-container
          .toggle.with-borders#home_toolbar-select-share-type{data: {toggle: '.home-toolbar-share-type-menu'}}
            .toggle-header-container
              .toggle-header
                - if selected_shape
                  = t(selected_shape[:name_tr_key])
                - else
                  = t("homepage.filters.all_listing_types")

              = icon_tag("dropdown", ["icon-dropdown"])

          .home-toolbar-share-type-menu.toggle-menu.hidden
            = link_to t("homepage.filters.all_listing_types"), search_path(search_params.merge({transaction_type: "all"}))
            - shapes.each do |shape|
              = link_to search_path(search_params.merge({transaction_type: shape[:name]})), class:  "toggle-menu-subitem" do
                = t(shape[:name_tr_key])

      / Filters
      .hidden-tablet
        - # Filters will be relocated to #desktop-filters when in desktop
        #filters
          = render :partial => "filters", :locals => { show_price_filter: show_price_filter, show_custom_fields: @show_custom_fields, filters: filters }         

      #desktop-filters
        - # Filters will be relocated here when in desktop

- if @show_categories        
  .row
    .col-3
      - if @show_categories
        .row
          .col-12
            = link_to t("homepage.filters.all_categories"), search_path(search_params.merge({category: "all"})), class: 'home-categories-main explore_category custom-categories-btn button custom_all_categories'
            - @main_categories.each do |category|
              = link_to category.display_name(I18n.locale), search_path(category: category), :class => "home-categories-main explore_category caps_one", :data => {category: category.id, url: search_path({category: category})}
              - if category.children
                - category.children.each do |child|
                  - is_selected = selected_category == child
                  = link_to child.display_name(I18n.locale), search_path(search_params.merge({category: child})), class: 'home-categories-main caps_one subcategory', data: {category: category.id, url: search_path({category: category})}

- content_for :extra_javascript do
  :javascript
    $('.home-categories-main').click(function(){
      url = $(this).attr("data-url");
      $(this).attr('href', url);
      $('#search_val').val("");
    });